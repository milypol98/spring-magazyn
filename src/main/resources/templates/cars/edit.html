<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/general.css}" />
</head>
<body>
<h1>
<div th:replace="~{fragments/navBar :: navbar}"></div>
</h1>

<div class="top-row">
    <div class="side-by-side">
        <div class="container w1200">
            <div class="table-header">
                <label class="table-title">Edytuj:</label>
            </div>

            <form th:action="@{'/cars/save'}" th:object="${car}" method="post" novalidate>
                <input type="hidden" th:field="*{id}" />

                <label>Nazwa:</label>
                <input type="text" th:field="*{name}"
                       th:classappend="${#fields.hasErrors('name')} ? 'invalid'"
                       required maxlength="100" />
                <div class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Błąd</div>

                <label>Marka:</label>
                <input type="text" th:field="*{brand}"
                       th:classappend="${#fields.hasErrors('brand')} ? 'invalid'"
                       required maxlength="100" />
                <div class="error" th:if="${#fields.hasErrors('brand')}" th:errors="*{brand}">Błąd</div>

                <label>Model:</label>
                <input type="text" th:field="*{model}"
                       th:classappend="${#fields.hasErrors('model')} ? 'invalid'"
                       required maxlength="100" />
                <div class="error" th:if="${#fields.hasErrors('model')}" th:errors="*{model}">Błąd</div>

                <label>Kolor:</label>
                <input type="text" th:field="*{color}"
                       th:classappend="${#fields.hasErrors('color')} ? 'invalid'"
                       required maxlength="50" />
                <div class="error" th:if="${#fields.hasErrors('color')}" th:errors="*{color}">Błąd</div>

                <label>Rejestracja:</label>
                <input type="text" th:field="*{registration}"
                       th:classappend="${#fields.hasErrors('registration')} ? 'invalid'"
                       pattern="^[A-Z0-9\-]{4,12}$" />
                <div class="error" th:if="${#fields.hasErrors('registration')}" th:errors="*{registration}">Błąd</div>

                <label>VIN:</label>
                <input type="text" th:field="*{vin}"
                       th:classappend="${#fields.hasErrors('vin')} ? 'invalid'"
                       pattern="^[A-HJ-NPR-Z0-9]{17}$" maxlength="17" />
                <div class="error" th:if="${#fields.hasErrors('vin')}" th:errors="*{vin}">Błąd</div>

                <label>Rok produkcji (data):</label>
                <input type="date" th:field="*{year}"
                       th:classappend="${#fields.hasErrors('year')} ? 'invalid'" />
                <div class="error" th:if="${#fields.hasErrors('year')}" th:errors="*{year}">Błąd</div>

                <label>Opis:</label>
                <textarea th:field="*{description}"
                          th:classappend="${#fields.hasErrors('description')} ? 'invalid'"
                          maxlength="2000"></textarea>
                <div class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}">Błąd</div>

                <label>Przegląd (następny):</label>
                <input type="date" th:field="*{review}"
                       th:classappend="${#fields.hasErrors('review')} ? 'invalid'" />
                <div class="error" th:if="${#fields.hasErrors('review')}" th:errors="*{review}">Błąd</div>

                <label>Ubezpieczenie (ważne do):</label>
                <input type="date" th:field="*{insured}"
                       th:classappend="${#fields.hasErrors('insured')} ? 'invalid'" />
                <div class="error" th:if="${#fields.hasErrors('insured')}" th:errors="*{insured}">Błąd</div>

                <label>Przebieg (km):</label>
                <input type="number" th:field="*{course}"
                       th:classappend="${#fields.hasErrors('course')} ? 'invalid'"
                       min="0" max="3000000" step="1" />
                <div class="error" th:if="${#fields.hasErrors('course')}" th:errors="*{course}">Błąd</div>

                <label>Data przebiegu:</label>
                <input type="date" th:field="*{courseDate}"
                       th:classappend="${#fields.hasErrors('courseDate')} ? 'invalid'" />
                <div class="error" th:if="${#fields.hasErrors('courseDate')}" th:errors="*{courseDate}">Błąd</div>

                <label>Interwał rozrządu (km):</label>
                <input type="number" th:field="*{timingSystemIntervalKm}"
                       th:classappend="${#fields.hasErrors('timingSystemIntervalKm')} ? 'invalid'"
                       min="0" max="1000000" step="1000" />
                <div class="error" th:if="${#fields.hasErrors('timingSystemIntervalKm')}" th:errors="*{timingSystemIntervalKm}">Błąd</div>

                <label>Przebieg rozrządu (km):</label>
                <input type="number" th:field="*{timingSystemCourse}"
                       th:classappend="${#fields.hasErrors('timingSystemCourse')} ? 'invalid'"
                       min="0" max="3000000" step="100" />
                <div class="error" th:if="${#fields.hasErrors('timingSystemCourse')}" th:errors="*{timingSystemCourse}">Błąd</div>

                <label>Przebieg wymiany oleju (km):</label>
                <input type="number" th:field="*{oilChangeCourse}"
                       th:classappend="${#fields.hasErrors('oilChangeCourse')} ? 'invalid'"
                       min="0" max="3000000" step="100" />
                <div class="error" th:if="${#fields.hasErrors('oilChangeCourse')}" th:errors="*{oilChangeCourse}">Błąd</div>

                <label>Interwał wymiany oleju (km):</label>
                <input type="number" th:field="*{oilChangeIntervalKm}"
                       th:classappend="${#fields.hasErrors('oilChangeIntervalKm')} ? 'invalid'"
                       min="0" max="1000000" step="1000" />
                <div class="error" th:if="${#fields.hasErrors('oilChangeIntervalKm')}" th:errors="*{oilChangeIntervalKm}">Błąd</div>

                <label>Koszyki:</label>
                <select th:field="*{cart}"
                        multiple size="5"
                        th:classappend="${#fields.hasErrors('cart')} ? 'invalid'">
                    <option th:each="c : ${allCarts}"
                            th:value="${c.id}"
                            th:text="${c.name}">
                    </option>
                </select>
                <div class="hint">Przytrzymaj Ctrl/Shift by wybrać wiele pozycji.</div>

                <div class="buttons">
                    <button type="submit" class="submit-btn">Zapisz</button>
                    <a th:href="@{/cars}" class="btn-cancel">Anuluj</a>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>