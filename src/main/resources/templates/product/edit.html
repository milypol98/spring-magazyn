<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" th:href="@{/css/general.css}" />

</head>
<body>

<header class="page-header">
    <nav class="breadcrumbs" aria-label="breadcrumb">
        <a th:href="@{/dashboard}" class="crumb">Strona główna</a>
        <span class="sep">/</span>
        <a th:href="@{|/warehouses/${productPosition.warehouse.id}|}" class="crumb">Magazyn</a>
        <span class="sep">/</span>
        <span class="crumb current" th:text="${productPosition.id != null ? 'Edycja pozycji' : 'Nowa pozycja'}">Formularz</span>
    </nav>

    <div class="header-row">
        <h1 class="page-title" th:text="${productPosition.id != null ? 'Edytuj pozycję' : 'Dodaj nową pozycję'}">Formularz</h1>
        <div class="header-tools">
            <a th:if="${productPosition?.id != null}" class="btn btn-primary" th:href="@{|/events/add/${productPosition.id}|}">+ Dodaj transfer</a>
        </div>
    </div>
</header>

<section class="form-container">
    <form th:action="@{/product-positions/save}" method="post" th:object="${productPosition}" class="card form">
        <input type="hidden" th:field="*{id}" />
        <input type="hidden" th:field="*{warehouse.id}" />
        <div class="form-row">
            <label for="name">Nazwa <span class="req">*</span></label>
            <input type="text" id="name" th:field="*{name}" maxlength="150" required />
            <div class="field-hint" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Błąd nazwy</div>
        </div>

        <div class="form-row">
            <label for="category">Kategoria</label>
            <input type="text" id="category" th:field="*{category}" maxlength="100" />
            <div class="field-hint" th:if="${#fields.hasErrors('category')}" th:errors="*{category}">Błąd kategorii</div>
        </div>

        <div class="form-row">
            <label for="description">Opis</label>
            <textarea id="description" th:field="*{description}" maxlength="255"></textarea>
            <div class="field-hint" th:if="${#fields.hasErrors('description')}" th:errors="*{description}">Błąd opisu</div>
        </div>

        <div class="form-row form-row-split">
            <div class="form-group">
                <label for="minStock">Minimalny stan <span class="req">*</span></label>
                <input type="number" id="minStock" th:field="*{minStock}" required />
                <div class="field-hint" th:if="${#fields.hasErrors('minStock')}" th:errors="*{minStock}">Błąd</div>
            </div>
            <div class="form-group">
                <label for="alarmStock">Alarmowy stan <span class="req">*</span></label>
                <input type="number" id="alarmStock" th:field="*{alarmStock}" required />
                <div class="field-hint" th:if="${#fields.hasErrors('alarmStock')}" th:errors="*{alarmStock}">Błąd</div>
            </div>
        </div>

        <div class="form-row">
            <label for="position">Lokalizacja (np. regał/półka)</label>
            <input type="text" id="position" th:field="*{position}" maxlength="50" />
            <div class="field-hint" th:if="${#fields.hasErrors('position')}" th:errors="*{position}">Błąd lokalizacji</div>
        </div>


        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Zapisz</button>
            <a th:href="@{|/warehouses/${productPosition.warehouse.id}|}" class="btn btn-secondary">Anuluj</a>
        </div>
    </form>
</section>
<script th:src="@{/js/general.js}"></script>
</body>
</html>