<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/general.css}" />

</head>
<body>
<header class="page-header">
    <nav class="breadcrumbs" aria-label="breadcrumb">
        <a th:href="@{/dashboard}" class="crumb">Strona główna</a>
        <span class="sep">/</span>
        <a th:href="@{|/warehouses/${productPosition.warehouse.id}|}" class="crumb">Magazyn</a>
        <span class="sep">/</span>
        <span class="crumb current">Formularz</span>
    </nav>

    <div class="header-row">
        <h1 class="page-title">Formularz</h1>
    </div>
</header>

<div class="top-row">
    <div class="side-by-side">
        <div class="container w1200">
            <div class="table-header">
                <label class="table-title" th:text="|Produkt: ${product.name}|"></label>
            </div>

            <form th:action="@{'/events/product-event/save'}" th:object="${productEvent}" method="post" id="eventForm">
                <input type="hidden" th:field="*{id}" />
                <input type="hidden" th:field="*{product.id}" />

                <div class="field-group">
                    <label class="inline">Ilość</label>
                    <input type="number" th:field="*{quantity}" class="w200" required />
                </div>

                <div class="field-group" id="grp-unitPrice">
                    <label class="inline">Cena jednostkowa</label>
                    <input type="number" step="0.01" th:field="*{unitPrice}" class="w200" />
                </div>

                <div class="field-group">
                    <label class="inline">Komentarz</label>
                    <textarea th:field="*{comment}" class="w200"></textarea>
                </div>

                <div class="field-group">
                    <label class="inline">Data i czas</label>
                    <input type="datetime-local" th:field="*{timestamp}"
                           th:text="${#temporals.format(productEvent.timestamp, 'yyyy-MM-dd''T''HH:mm')}" required />
                </div>

                <!-- Typ zdarzenia -->
                <div class="field-group" id="grp-eventType">
                    <label class="inline">Typ</label>
                    <select th:field="*{eventType}" id="eventType" required>
                        <option value="" disabled selected>-- wybierz typ zdarzenia --</option>
                        <option th:each="t : ${eventTypes}" th:value="${t}" th:text="${t}"></option>
                    </select>
                </div>

                <!-- FROM -->
                <div class="field-group" id="grp-fromType">
                    <label class="inline">Źródło (From)</label>
                    <select th:field="*{fromLocationType}" id="fromType">
                        <option value="" disabled selected>-- wybierz typ źródła --</option>
                        <option th:each="l : ${locationTypes}" th:value="${l}" th:text="${l}"></option>
                    </select>
                </div>

                <div class="field-group" id="grp-fromCar">
                    <label class="inline">Auto źródłowe</label>
                    <select th:field="*{fromLocationCode}" id="fromCar">
                        <option value="" disabled selected>-- wybierz auto --</option>
                        <option th:each="c : ${cars}" th:value="${c.id}"
                                th:text="${c.name + ' | ' + (c.registration ?: '')}"></option>
                    </select>
                </div>

                <div class="field-group" id="grp-fromTask">
                    <label class="inline">Zadanie źródłowe</label>
                    <select th:field="*{fromLocationCode}" id="fromTask">
                        <option value="" disabled selected>-- wybierz zadanie --</option>
                        <option th:each="t : ${tasks}" th:value="${t.id}" th:text="${t.name}"></option>
                    </select>
                </div>

                <!-- TO -->
                <div class="field-group" id="grp-toType">
                    <label class="inline">Cel (To)</label>
                    <select th:field="*{toLocationType}" id="toType">
                        <option value="" disabled selected>-- wybierz typ celu --</option>
                        <option th:each="l : ${locationTypes}" th:value="${l}" th:text="${l}"></option>
                    </select>
                </div>

                <div class="field-group" id="grp-toCar">
                    <label class="inline">Auto docelowe</label>
                    <select th:field="*{toLocationCode}" id="toCar">
                        <option value="" disabled selected>-- wybierz auto --</option>
                        <option th:each="c : ${cars}" th:value="${c.id}"
                                th:text="${c.name + ' | ' + (c.registration ?: '')}"></option>
                    </select>
                </div>

                <div class="field-group" id="grp-toTask">
                    <label class="inline">Zadanie docelowe</label>
                    <select th:field="*{toLocationCode}" id="toTask">
                        <option value="" disabled selected>-- wybierz zadanie --</option>
                        <option th:each="t : ${tasks}" th:value="${t.id}" th:text="${t.name}"></option>
                    </select>
                </div>

                <button type="submit" class="submit-btn">Zapisz</button>
            </form>
        </div>
    </div>
</div>
<script th:src="@{/js/general.js}"></script>

</body>
</html>